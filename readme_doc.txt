1. Зубко Александр
2. Комнаты генерируются по тайлам. Сначала из тайлов делается прямоугольник, затем случайные тайлы удаляются. Потом с помощью BFS проверяем, что не нарушилась нужная нам связность. Если нарушилась - все сначала.
Как ставятся ловушки:
Статические - выбирается случайный непустой тайл. На нем выбирается рандомная позиция.
Динамические - выбирается случайный непустой тайл. На нем выбирается рандомная позиция. Дальше выбирается рандомный 2D вектор (длина динамическая от сложности), плюсуется к этой позиции, получается финальная позиция. Далее linetrace по каналу стен, если есть коллизия - пробуем сгенерить снова. Ну и там еще тоже всякие нюансы учитываются, например, чтобы за пределы поля динамические ловушки не улетали и т. д.
3. Сложность в зависимости от уровня и наличия хила на уровне выбирается в фабрике BP_Difficulty_Factory. Далее эта сложность используется в фабрике BP_RoomDifficultySettings_Factory, для генерации структуры сложности для одной комнаты (размеры комнаты, количество ловушек, средняя мощность ловушек, средняя скорость динамических и т. д.). В этой структуре все float'ы берутся из Curve_Float в зависимости от float Difficulty. Эта структура используется для построения отдельно взятой комнаты, там, например, для каждой ловушки семплируется нормальное распределение для определения мощности, скорости и т. д.